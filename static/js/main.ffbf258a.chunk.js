(this["webpackJsonptwitter-clone"]=this["webpackJsonptwitter-clone"]||[]).push([[0],{61:function(e,n,t){"use strict";t.r(n);var r=t(2),c=t(3),a=t.n(c),i=t(37),o=t.n(i),u=t(6),s=t(8),l=t(26);t(47),t(49),t(51),t(62);l.a.initializeApp({apiKey:"AIzaSyCFThyfnpvn_rCUfndFdov9uDToOfO1XZM",authDomain:"pwitter-2b18a.firebaseapp.com",databaseURL:"https://pwitter-2b18a.firebaseio.com",projectId:"pwitter-2b18a",storageBucket:"pwitter-2b18a.appspot.com",messagingSenderId:"120978261910",appId:"1:120978261910:web:ec97b4f8c70cb83ba23fb7",measurementId:"G-0M28SLKX8R"});var d=l.a,b=l.a.auth(),j=l.a.firestore(),p=l.a.storage(),f=t(5),x=t(21),h=t(10),O=t(9),m=t.n(O),v=t(13),g=t(16),w=t(25);function y(){var e=Object(u.a)(["\n  /* \uacf5\ud1b5\uc2a4\ud0c0\uc77c */\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  margin-bottom: 5px;\n  padding: 10px 15px;\n  border: none;\n  border-radius: 30px;\n  outline: none;\n  font-size: 14px;\n  cursor: pointer;\n\n  ","\n  ","\n"]);return y=function(){return e},e}function k(){var e=Object(u.a)(["\n      width: 100%;\n    "]);return k=function(){return e},e}function S(){var e=Object(u.a)(["\n  ","\n"]);return S=function(){return e},e}function N(){var e=Object(u.a)(["\n      background-color: ",";\n      color: ",";\n      border: 1px solid ",";\n      &:active {\n        background-color: ",";\n      }\n    "]);return N=function(){return e},e}function C(){var e=Object(u.a)(["\n        padding: 5px 13px;\n        font-size: 12px;\n        background-color: ",";\n        color: ",";\n        border: 1px solid ",";\n        &:hover {\n          background-color: darkgray;\n          color: white;\n        }\n        &:active {\n          background-color: darkgray;\n          color: white;\n        }\n      "]);return C=function(){return e},e}function U(){var e=Object(u.a)(["\n          padding: 10px 15px;\n          font-size: 14px;\n          background-color: ",";\n          color: ",";\n          border: 1px solid ",";\n          &:hover {\n            background-color: darkgray;\n            color: white;\n          }\n          &:active {\n            background-color: darkgray;\n            color: white;\n          }\n        "]);return U=function(){return e},e}function z(){var e=Object(u.a)(["\n        padding: 10px 13px;\n        background-color: ",";\n        border-radius: 50%;\n        opacity: 0.7;\n        color: white;\n        font-size: 12px;\n      "]);return z=function(){return e},e}function I(){var e=Object(u.a)(["\n  /* \uc0c9\uc0c1 */\n  ","\n"]);return I=function(){return e},e}var P=Object(f.c)(I(),(function(e){var n=e.theme,t=e.color,r=e.deletePhoto,c=e.editTweet,a=e.deleteTweet,i=e.closeModal,o=e.cancelBtn,u=e.logoutBtn,s=n.theme[t],l="skyblue"===t?"white":n.theme.skyblue;return r||i?Object(f.c)(z(),s):c||a||o||u?o?Object(f.c)(U(),s,n.theme.gray,n.theme.gray):Object(f.c)(C(),s,n.theme.gray,n.theme.gray):Object(f.c)(N(),s,l,l,s)})),F=Object(f.c)(S(),(function(e){return"full"===e.size&&Object(f.c)(k())})),D=f.d.button(y(),P,F),R=function(e){var n=e.children,t=Object(w.a)(e,["children"]);return Object(r.jsx)(D,Object(g.a)(Object(g.a)({},t),{},{children:n}))};R.defaultProps={color:"skyblue"};var A=R,L=t(15),T=t(29);function q(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n"]);return q=function(){return e},e}var _=function(){var e=function(){var e=Object(v.a)(m.a.mark((function e(n){var t,r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"google"===(t=n.target.name)?r=new d.auth.GoogleAuthProvider:"github"===t&&(r=new d.auth.GithubAuthProvider),e.next=4,b.signInWithPopup(r);case 4:return c=e.sent,e.next=7,j.collection("users").doc("".concat(c.user.uid)).set({uid:c.user.uid,name:c.user.displayName});case 7:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}();return Object(r.jsxs)(B,{children:[Object(r.jsxs)(A,{onClick:e,name:"google",color:"white",children:[Object(r.jsx)(L.a,{icon:T.b})," \uad6c\uae00\uacc4\uc815\uc73c\ub85c \uc2dc\uc791\ud558\uae30"]}),Object(r.jsxs)(A,{onClick:e,name:"github",color:"white",children:[Object(r.jsx)(L.a,{icon:T.a})," \uae43\ud5c8\ube0c\uacc4\uc815\uc73c\ub85c \uc2dc\uc791\ud558\uae30"]})]})},B=f.d.div(q());function E(){var e=Object(u.a)(["\n  /* \uacf5\ud1b5\uc2a4\ud0c0\uc77c */\n  padding: 10px;\n  border-radius: 8px;\n  border: 1px solid #9fa0a0;\n  outline: none;\n  font-size: 14px;\n"]);return E=function(){return e},e}var K=f.d.input(E()),M=function(e){var n=e.children,t=Object(w.a)(e,["children"]);return Object(r.jsx)(K,Object(g.a)(Object(g.a)({},t),{},{children:n}))};function G(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-bottom: 20px;\n  input {\n    margin-top: 8px;\n  }\n"]);return G=function(){return e},e}var W=function(){var e=Object(c.useState)(""),n=Object(s.a)(e,2),t=n[0],a=n[1],i=Object(c.useState)(""),o=Object(s.a)(i,2),u=o[0],l=o[1],d=function(e){var n=e.target,t=n.name,r=n.value;"email"===t?a(r):"password"===t&&l(r)},j=function(){var e=Object(v.a)(m.a.mark((function e(n){var r;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,b.signInWithEmailAndPassword(t,u);case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(1),"auth/invalid-email"===(r=e.t0.code)?alert("\uc62c\ubc14\ub978 \uc774\uba54\uc77c \ud615\uc2dd\uc774 \uc544\ub2d9\ub2c8\ub2e4"):"auth/user-disabled"===r?alert("\ube44\ud65c\uc131\ud654\ub41c \uc0ac\uc6a9\uc790\uc785\ub2c8\ub2e4"):("auth/user-not-found"===r||"auth/wrong-password"===r)&&alert("\uc544\uc774\ub514 \ud639\uc740 \ube44\ubc00\ubc88\ud638\uac00 \uc77c\uce58\ud558\uc9c0 \uc54a\uc2b5\ub2c8\ub2e4");case 10:case"end":return e.stop()}}),e,null,[[1,6]])})));return function(n){return e.apply(this,arguments)}}();return Object(r.jsxs)(H,{onSubmit:j,children:[Object(r.jsx)(M,{onChange:d,name:"email",value:t,type:"text",placeholder:"\uc774\uba54\uc77c",required:!0}),Object(r.jsx)(M,{onChange:d,name:"password",value:u,type:"password",placeholder:"\ube44\ubc00\ubc88\ud638",required:!0}),Object(r.jsx)(A,{as:"input",type:"submit",value:"\ub85c\uadf8\uc778"})]})},H=f.d.form(G());function J(){var e=Object(u.a)(["\n  width: 400px;\n"]);return J=function(){return e},e}var X=function(){return Object(r.jsxs)(Y,{children:[Object(r.jsx)(W,{}),Object(r.jsx)(x.b,{to:"/signup",replace:!0,children:Object(r.jsx)(A,{size:"full",children:"\uac00\uc785\ud558\uae30"})}),Object(r.jsx)(_,{})]})},Y=f.d.div(J());function Z(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  width: 400px;\n  input {\n    margin-bottom: 10px;\n  }\n"]);return Z=function(){return e},e}var Q=f.d.form(Z()),V=function(){var e=Object(c.useState)(""),n=Object(s.a)(e,2),t=n[0],a=n[1],i=Object(c.useState)(""),o=Object(s.a)(i,2),u=o[0],l=o[1],d=Object(c.useState)(""),p=Object(s.a)(d,2),f=p[0],x=p[1],h=Object(c.useState)(!1),O=Object(s.a)(h,2),g=O[0],w=O[1],y=function(e){var n=e.target,t=n.name,r=n.value;"email"===t?a(r):"password"===t?l(r):"nickname"===t&&x(r)},k=function(){var e=Object(v.a)(m.a.mark((function e(n){var r,c;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,e.next=4,b.createUserWithEmailAndPassword(t,u);case 4:return r=e.sent,w(!0),e.next=8,j.collection("users").doc("".concat(r.user.uid)).set({uid:r.user.uid,name:f});case 8:e.next=15;break;case 10:e.prev=10,e.t0=e.catch(1),c=e.t0.code,w(!1),"auth/invalid-email"===c?alert("\uc62c\ubc14\ub978 \uc774\uba54\uc77c \ud615\uc2dd\uc774 \uc544\ub2d9\ub2c8\ub2e4"):"auth/email-already-in-use"===c?alert("\uc774\ubbf8 \uc0ac\uc6a9 \uc911\uc778 \uc774\uba54\uc77c\uc785\ub2c8\ub2e4"):"auth/weak-password"===c&&alert("\ube44\ubc00\ubc88\ud638\ub97c \ucd5c\uc18c 6\uc790\ub9ac\uc774\uc0c1 \uc785\ub825\ud574\uc8fc\uc138\uc694");case 15:case"end":return e.stop()}}),e,null,[[1,10]])})));return function(n){return e.apply(this,arguments)}}();return Object(r.jsx)(r.Fragment,{children:g?Object(r.jsxs)("div",{children:["\ud68c\uc6d0\uac00\uc785\uc131\uacf5!",Object(r.jsx)("p",{children:"\uba54\uc778\uc73c\ub85c \uc774\ub3d9\ud569\ub2c8\ub2e4"})]}):Object(r.jsx)("div",{children:Object(r.jsxs)(Q,{onSubmit:k,children:[Object(r.jsx)(M,{onChange:y,value:t,name:"email",type:"text",placeholder:"\uc774\uba54\uc77c",required:!0}),Object(r.jsx)(M,{onChange:y,value:u,name:"password",type:"password",placeholder:"\ube44\ubc00\ubc88\ud638",required:!0}),Object(r.jsx)(M,{onChange:y,value:f,name:"nickname",type:"text",placeholder:"\uc774\ub984",required:!0}),Object(r.jsx)(A,{as:"input",type:"submit",value:"\uac00\uc785\ud558\uae30"})]})})})};function $(){var e=Object(u.a)(["\n  display: ",";\n  position: fixed;\n  top: 0;\n  left: 0;\n  bottom: 0;\n  right: 0;\n  background-color: rgba(0, 0, 0, 0.6);\n  z-index: 999;\n"]);return $=function(){return e},e}function ee(){var e=Object(u.a)(["\n  display: ",";\n  position: fixed;\n  top: 0;\n  right: 0;\n  bottom: 0;\n  left: 0;\n  z-index: 1000;\n  overflow: auto;\n  outline: 0;\n"]);return ee=function(){return e},e}function ne(){var e=Object(u.a)(["\n  display: flex;\n  align-items: center;\n"]);return ne=function(){return e},e}function te(){var e=Object(u.a)(["\n  max-width: 500px;\n  margin: 0 auto;\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n"]);return te=function(){return e},e}var re={skyblue:"#1da1f3",darkblue:"#339af0",white:"#ffffff",gray:"#aaa",black:"#000"},ce=f.d.div(te()),ae=f.d.div(ne()),ie=f.d.div(ee(),(function(e){return e.visible?"block":"none"})),oe=f.d.div($(),(function(e){return e.visible?"block":"none"})),ue=t(22);function se(){var e=Object(u.a)(["\n  height: 100%;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: flex-start;\n  position: relative;\n  margin: 0 auto;\n  button {\n    margin: 20px;\n  }\n  img {\n    display: block;\n    height: auto;\n  }\n"]);return se=function(){return e},e}var le=function(e){var n=e.imgUrl,t=e.visible,a=e.closable,i=e.onClose;Object(c.useEffect)((function(){return document.body.style.cssText="position: fixed; top: -".concat(window.scrollY,"px; width: 100%;"),function(){var e=document.body.style.top;document.body.style.cssText='position: ""; top: "";',window.scrollTo(0,-1*parseInt(e||"0"))}}),[]);return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(oe,{visible:t}),Object(r.jsx)(ie,{tabIndex:"-1",visible:t,children:Object(r.jsxs)(de,{tabIndex:"0",className:"modal-inner",children:[a&&Object(r.jsx)(A,{closeModal:!0,color:"black",onClick:function(e){i&&i(e)},children:Object(r.jsx)(L.a,{icon:ue.c})}),Object(r.jsx)("img",{src:n,alt:"img"})]})})]})},de=f.d.div(se());le.defaultProps={closable:!0,visible:!1};var be=le,je=t(64);function pe(){var e=Object(u.a)(["\n  position: relative;\n  margin: 20px 0 10px;\n  button {\n    position: absolute;\n    top: 0;\n    left: 0;\n    margin: 5px;\n  }\n  img {\n    border-radius: 20px;\n  }\n"]);return pe=function(){return e},e}function fe(){var e=Object(u.a)(["\n  width: 100%;\n  margin-top: 5px;\n  border: none;\n  outline: none;\n  font-size: 17px;\n  resize: none;\n  overflow: hidden;\n  ::placeholder {\n    letter-spacing: -1.5px;\n  }\n"]);return fe=function(){return e},e}function xe(){var e=Object(u.a)(['\n  margin-bottom: 10px;\n  padding: 15px 10px 5px;\n  border-bottom: 1px solid #ddd;\n  background-color: white;\n  .btn-group {\n    display: flex;\n    justify-content: space-between;\n    align-items: center;\n    margin-top: 10px;\n    margin-left: 5px;\n    label {\n      cursor: pointer;\n      input[type="file"] {\n        display: none;\n      }\n    }\n  }\n']);return xe=function(){return e},e}var he=f.d.form(xe()),Oe=f.d.textarea(fe()),me=f.d.div(pe()),ve=function(e){var n=e.userObj,t=Object(c.useState)(""),a=Object(s.a)(t,2),i=a[0],o=a[1],u=Object(c.useState)(""),l=Object(s.a)(u,2),d=l[0],b=l[1],f=function(){var e=Object(v.a)(m.a.mark((function e(t){var r,c,a,u;return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),r="",""===d){e.next=10;break}return c=p.ref().child("".concat(n.uid,"/").concat(Object(je.a)())),e.next=6,c.putString(d,"data_url");case 6:return a=e.sent,e.next=9,a.ref.getDownloadURL();case 9:r=e.sent;case 10:return u={text:i,attachmentUrl:r,userName:n.displayName,createAt:Date.now(),creatorId:n.uid},e.next=13,j.collection("tweets").add(u);case 13:o(""),b("");case 15:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),x=function(e){var n=e.target;n.style.height=n.scrollHeight+"px"};return Object(r.jsxs)(he,{onSubmit:f,children:[Object(r.jsx)(Oe,{value:i,onChange:function(e){var n=e.target.value;o(n)},onKeyDown:x,onKeyUp:x,placeholder:"\ubb34\uc2a8 \uc77c\uc774 \uc77c\uc5b4\ub098\uace0 \uc788\ub098\uc694?",cols:"50",rows:"2",maxLength:120}),Object(r.jsxs)("div",{className:"btn-group",children:[Object(r.jsxs)("label",{htmlFor:"attach-file","aria-label":"\uc0ac\uc9c4 \uc5c5\ub85c\ub4dc",children:[Object(r.jsx)(L.a,{icon:ue.b,color:re.skyblue,size:"lg"}),Object(r.jsx)("input",{id:"attach-file",onChange:function(e){var n=e.target.files[0],t=new FileReader;t.onloadend=function(e){var n=e.currentTarget.result;b(n)},t.readAsDataURL(n)},type:"file",accept:"image/*"})]}),Object(r.jsx)(A,{as:"input",type:"submit",value:"\ud2b8\uc717"})]}),d&&Object(r.jsxs)(me,{children:[Object(r.jsx)("img",{src:d,alt:"img"}),Object(r.jsx)(A,{color:"black",onClick:function(){return b("")},deletePhoto:!0,children:Object(r.jsx)(L.a,{icon:ue.c})})]})]})};function ge(){var e=Object(u.a)(["\n  display: flex;\n  flex-direction: column;\n  padding: 10px 15px;\n  border-top: 1px solid #ddd;\n  background-color: white;\n  font-size: 16px;\n  letter-spacing: -0.5px;\n  h6 {\n    margin: 5px 0;\n    font-weight: bold;\n  }\n  textarea {\n    margin-bottom: 15px;\n  }\n  .tweet-info {\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    .btn-group {\n      justify-self: end;\n      button {\n        &:first-child {\n          margin-right: 3px;\n        }\n      }\n    }\n    p {\n      margin: 10px 0 13px;\n      grid-column: span 2;\n    }\n  }\n  .img-preview {\n    position: relative;\n    cursor: pointer;\n    height: 280px;\n    background-size: cover;\n    background-position: center;\n    border: 1px solid #ccc;\n    border-radius: 20px;\n  }\n"]);return ge=function(){return e},e}var we=f.d.div(ge()),ye=function(e){var n=e.children,t=Object(w.a)(e,["children"]);return Object(r.jsx)(we,Object(g.a)(Object(g.a)({},t),{},{children:n}))},ke=function(e){var n=e.tweetObj,t=e.isOwner,a=Object(c.useState)(!1),i=Object(s.a)(a,2),o=i[0],u=i[1],l=Object(c.useState)(n.text),d=Object(s.a)(l,2),b=d[0],f=d[1],x=Object(c.useState)(!1),h=Object(s.a)(x,2),O=h[0],g=h[1],w=function(){var e=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("\uc0ad\uc81c\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")){e.next=7;break}return e.next=4,j.doc("tweets/".concat(n.id)).delete();case 4:if(""===n.attachmentUrl){e.next=7;break}return e.next=7,p.refFromURL(n.attachmentUrl).delete();case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),y=function(){return u((function(e){return!e}))},k=function(){var e=Object(v.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,j.doc("tweets/".concat(n.id)).update({text:b});case 3:u(!1);case 4:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),S=function(e){var n=e.target;n.style.height=n.scrollHeight+"px"},N={backgroundImage:"url(".concat(n.attachmentUrl,")")};return Object(r.jsx)("article",{children:o?Object(r.jsxs)(ye,{children:[Object(r.jsx)("h6",{children:n.userName}),Object(r.jsxs)("form",{onSubmit:k,children:[Object(r.jsx)(Oe,{value:b,onChange:function(e){var n=e.target.value;f(n)},onKeyDown:S,onKeyUp:S,placeholder:"\uc218\uc815 \uc0ac\ud56d \uc785\ub825",cols:"50",rows:"2",maxLength:120}),Object(r.jsx)(A,{as:"input",type:"submit",value:"\ud655\uc778",size:"full"})]}),Object(r.jsx)(A,{onClick:y,color:"white",cancelBtn:!0,children:"\ucde8\uc18c"})]}):Object(r.jsxs)(ye,{children:[Object(r.jsxs)("div",{className:"tweet-info",children:[Object(r.jsx)("h6",{children:n.userName}),t&&Object(r.jsxs)(ae,{className:"btn-group",children:[Object(r.jsx)(A,{onClick:y,color:"white",editTweet:!0,children:"\uc218\uc815"}),Object(r.jsx)(A,{onClick:w,color:"white",deleteTweet:!0,children:"\uc0ad\uc81c"})]}),Object(r.jsx)("p",{children:n.text})]}),n.attachmentUrl&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("div",{className:"img-preview",style:N,onClick:function(){g(!0)}}),O&&Object(r.jsx)(be,{imgUrl:n.attachmentUrl,visible:O,closable:!0,onClose:function(){g(!1)}})]})]})})};function Se(){var e=Object(u.a)(["\n  width: 100%;\n  background-color: #eeeeee;\n"]);return Se=function(){return e},e}var Ne=f.d.div(Se()),Ce=function(e){var n=e.userObj,t=Object(c.useState)([]),a=Object(s.a)(t,2),i=a[0],o=a[1];return Object(c.useEffect)((function(){var e=j.collection("tweets").orderBy("createAt","desc").onSnapshot((function(e){var n=e.docs.map((function(e){return Object(g.a)({id:e.id},e.data())}));o(n)}));return function(){e()}}),[]),Object(r.jsxs)(Ne,{children:[Object(r.jsx)(ve,{userObj:n}),Object(r.jsx)("section",{children:i.map((function(e){return Object(r.jsx)(ke,{tweetObj:e,isOwner:e.creatorId===n.uid},e.id)}))})]})};function Ue(){var e=Object(u.a)(['\n  width: 100%;\n  padding: 10px 15px 20px;\n  display: flex;\n  justify-content: space-between;\n  .user-profile {\n    display: flex;\n    flex-direction: column;\n    &__image {\n      width: 150px;\n      height: 150px;\n      border-radius: 50%;\n      border: 2px solid #eee;\n      background-image: url("https://cdn.kado.net/news/photo/202004/1018454_448598_1539.jpg");\n      background-size: cover;\n      background-position: center;\n      margin-bottom: 20px;\n    }\n    h4 {\n      font-weight: bold;\n    }\n  }\n\n  .profile-form {\n    height: 100%;\n    position: relative;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    form {\n      width: 450px;\n      display: flex;\n      justify-content: center;\n      padding: 30px;\n      background-color: #fff;\n      border-radius: 15px;\n    }\n  }\n  .user-util {\n    display: flex;\n    flex-direction: column;\n    justify-content: space-between;\n  }\n']);return Ue=function(){return e},e}function ze(){var e=Object(u.a)(["\n  width: 100%;\n"]);return ze=function(){return e},e}var Ie=f.d.section(ze()),Pe=f.d.section(Ue()),Fe=function(e){var n=e.userObj,t=e.refreshUser,a=Object(c.useState)([]),i=Object(s.a)(a,2),o=i[0],u=i[1],l=Object(c.useState)(n.displayName),d=Object(s.a)(l,2),p=d[0],f=d[1],x=Object(c.useState)(!1),O=Object(s.a)(x,2),w=O[0],y=O[1],k=Object(h.g)();Object(c.useEffect)((function(){var e=j.collection("tweets").where("creatorId","==",n.uid).orderBy("createAt","desc").onSnapshot((function(e){var n=e.docs.map((function(e){return Object(g.a)({id:e.id},e.data())}));u(n)}));return function(){e()}}),[n]);var S=function(){var e=Object(v.a)(m.a.mark((function e(r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),n.displayName===p){e.next=7;break}return N(),e.next=5,n.updateProfile({displayName:p});case 5:C(),t();case 7:C();case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),N=function(){var e=Object(v.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.collection("tweets").where("creatorId","==",n.uid).get();case 2:e.sent.docs.map((function(e){return j.doc("tweets/".concat(e.id)).update({userName:p})}));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),C=function(){y(!1)};return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsxs)(Pe,{children:[Object(r.jsxs)("div",{className:"user-profile",children:[Object(r.jsx)("div",{className:"user-profile__image"}),Object(r.jsx)("h4",{children:n.displayName})]}),w&&Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(oe,{visible:!0}),Object(r.jsx)(ie,{tabIndex:"-1",visible:!0,onClick:C,children:Object(r.jsx)("div",{className:"profile-form",children:Object(r.jsxs)("form",{onSubmit:S,children:[Object(r.jsx)(M,{type:"text",onChange:function(e){var n=e.target.value;f(n)},value:p,placeholder:"\ub2c9\ub124\uc784"}),Object(r.jsx)(A,{as:"input",type:"submit",value:"\uc800\uc7a5"})]})})})]}),Object(r.jsxs)("div",{className:"user-util",children:[Object(r.jsx)(A,{color:"white",onClick:function(){y(!0)},children:"\ud504\ub85c\ud544 \uc218\uc815"}),Object(r.jsx)(A,{color:"white",onClick:function(){window.confirm("\ub85c\uadf8\uc544\uc6c3\ud558\uc2dc\uaca0\uc2b5\ub2c8\uae4c?")&&(b.signOut(),k.push("/"))},logoutBtn:!0,children:"\ub85c\uadf8\uc544\uc6c3"})]})]}),Object(r.jsx)(Ie,{children:o&&o.map((function(e){return Object(r.jsx)(ke,{tweetObj:e,isOwner:e.creatorId===n.uid},e.id)}))})]})};function De(){var e=Object(u.a)(["\n  width: 100%;\n  display: flex;\n  justify-content: space-between;\n  padding: 0px 10px 10px;\n  border-bottom: 1px solid #ddd;\n  li {\n    &:first-child {\n      margin-right: 20px;\n    }\n  }\n"]);return De=function(){return e},e}var Re=f.d.ul(De()),Ae=function(){return Object(r.jsxs)(Re,{children:[Object(r.jsx)("li",{children:Object(r.jsx)(x.b,{to:"/",replace:!0,children:Object(r.jsx)(L.a,{icon:ue.a,color:re.skyblue,size:"lg","aria-label":"\ud648"})})}),Object(r.jsx)("li",{children:Object(r.jsx)(x.b,{to:"/profile",replace:!0,children:Object(r.jsx)(L.a,{icon:ue.d,color:re.skyblue,size:"lg","aria-label":"\ud504\ub85c\ud544"})})})]})},Le=function(e){var n=e.userObj,t=e.isLoggedIn,c=e.refreshUser;return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(x.a,{children:[t&&Object(r.jsx)(Ae,{}),Object(r.jsx)(h.d,{children:t?Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(h.b,{exact:!0,path:"/",children:Object(r.jsx)(Ce,{userObj:n})}),Object(r.jsx)(h.b,{exact:!0,path:"/profile",children:Object(r.jsx)(Fe,{userObj:n,refreshUser:c})}),Object(r.jsx)(h.a,{from:"*",to:"/"})]}):Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(h.b,{exact:!0,path:"/",children:Object(r.jsx)(X,{})}),Object(r.jsx)(h.a,{from:"*",to:"/"})]})}),Object(r.jsx)(h.b,{exact:!0,path:"/signup",children:Object(r.jsx)(V,{})}),Object(r.jsx)(h.a,{from:"*",to:"/"})]})})},Te=t(41);function qe(){var e=Object(u.a)(["\n@font-face {\n    font-family: 'NanumSquareRound';\n    src: url('https://cdn.jsdelivr.net/gh/projectnoonnu/noonfonts_two@1.0/NanumSquareRound.woff') format('woff');\n    font-weight: normal;\n    font-style: normal;\n}\n  ","\n  * {\n    box-sizing: border-box;\n    font-family: 'NanumSquareRound';\n  }\n  body{\n    background-color: #ffffff;\n    font-family: 'NanumSquareRound';\n  }\n  a {\n    color: inherit;\n    text-decoration: none;\n  }\n  input, button {\n    // background-color: transparent;\n    // border: none;\n    // outline: none;\n  }\n  h1, h2, h3, h4, h5, h6{\n      \n  }\n  ol, ul, li {\n    list-style: none;\n  }\n  img {\n    display: block;\n    width: 100%;\n    height: 100%;\n  }\n"]);return qe=function(){return e},e}var _e=Object(f.b)(qe(),Te.a);function Be(){var e=Object(u.a)(["\n  display: flex;\n  justify-content: center;\n  margin: 30px 0;\n"]);return Be=function(){return e},e}var Ee=f.d.span(Be()),Ke=function(){var e=Object(c.useState)(!1),n=Object(s.a)(e,2),t=n[0],a=n[1],i=Object(c.useState)(!1),o=Object(s.a)(i,2),u=o[0],l=o[1],d=Object(c.useState)(null),p=Object(s.a)(d,2),x=p[0],h=p[1];Object(c.useEffect)((function(){b.onAuthStateChanged((function(e){e?(l(!0),h({displayName:e.displayName,uid:e.uid,photoUrl:e.photoURL,updateProfile:function(n){return e.updateProfile(n)}}),O(e)):l(!1),a(!0)}))}),[]);var O=function(e){j.collection("users").doc("".concat(e.uid)).onSnapshot((function(n){var t=n.data();null===e.displayName&&e.updateProfile({displayName:t.name})}))};return Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(f.a,{theme:{theme:re},children:[Object(r.jsx)(_e,{}),t?Object(r.jsxs)(ce,{children:[Object(r.jsx)(Ee,{as:"a",href:"/pwitter",children:Object(r.jsx)(L.a,{icon:T.c,size:"2x",color:re.skyblue})}),Object(r.jsx)(Le,{userObj:x,isLoggedIn:u,refreshUser:function(){var e=b.currentUser;h({displayName:e.displayName,uid:e.uid,photoUrl:e.photoURL,updateProfile:function(n){return e.updateProfile(n)}})}})]}):""]})})};o.a.render(Object(r.jsx)(a.a.StrictMode,{children:Object(r.jsx)(Ke,{})}),document.getElementById("root"))}},[[61,1,2]]]);
//# sourceMappingURL=main.ffbf258a.chunk.js.map